# dYdX Order Routing Service - Production Environment Configuration
# Copy this file to .env.prod and fill in the actual values
# NEVER commit this file with real values to version control

# Server Configuration
PORT=8080
LOG_LEVEL=warn
LOG_FORMAT=json
ENVIRONMENT=production

# Database Configuration
DB_PASSWORD=your-very-secure-db-password-production-min-32-chars
DATABASE_MAX_OPEN_CONNS=50
DATABASE_MAX_IDLE_CONNS=10
DATABASE_CONN_MAX_LIFETIME=5m

# dYdX Configuration (Mainnet for production)
DYDX_NETWORK=mainnet
INDEXER_URL=https://indexer.dydx.trade
RPC_URL=https://dydx-rpc.kingnodes.com:443
CHAIN_ID=dydx-mainnet-1

# Wallet Configuration - PRODUCTION MAINNET
# CRITICAL: Use a dedicated production wallet with proper security measures
# Consider using hardware wallet or secure key management system
MNEMONIC="your production mainnet mnemonic phrase here twelve words with real funds"
WALLET_HD_PATH="m/44'/118'/0'/0/0"

# Security Configuration
API_KEY=your-very-secure-api-key-production-min-64-chars-random-string
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST=100
REQUEST_TIMEOUT=30s
MAX_REQUEST_SIZE=1MB

# CORS Configuration - Restrict to your domain only
CORS_ALLOWED_ORIGINS=https://app.cryptopulse.com

# Monitoring Configuration
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30s

# Circuit Breaker Configuration - More aggressive for production
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_MAX_FAILURES=3
CIRCUIT_BREAKER_RESET_TIMEOUT=60s
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=5

# Retry Configuration
RETRY_ENABLED=true
RETRY_MAX_ATTEMPTS=3
RETRY_INITIAL_DELAY=1s
RETRY_MAX_DELAY=30s
RETRY_MULTIPLIER=2.0
RETRY_JITTER=true

# Redis Configuration
REDIS_PASSWORD=your-very-secure-redis-password-production-min-32-chars

# Monitoring Passwords
GRAFANA_PASSWORD=your-very-secure-grafana-password-production-min-32-chars

# SSL Configuration
SSL_CERT_PATH=/etc/nginx/ssl/cryptopulse.com.crt
SSL_KEY_PATH=/etc/nginx/ssl/cryptopulse.com.key

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=cryptopulse-backups-prod
BACKUP_S3_REGION=us-east-1

# AWS Configuration (for backups and monitoring)
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# Alerting Configuration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/PRODUCTION/WEBHOOK
ALERT_EMAIL=alerts@cryptopulse.com
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-integration-key

# Performance Tuning
GO_MAX_PROCS=4
GOMAXPROCS=4

# Security Headers
SECURITY_HSTS_MAX_AGE=31536000
SECURITY_CONTENT_TYPE_NOSNIFF=true
SECURITY_FRAME_DENY=true
SECURITY_XSS_PROTECTION=true

# Rate Limiting - Production specific
RATE_LIMIT_REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
RATE_LIMIT_SLIDING_WINDOW=true

# Database Connection Security
DATABASE_SSL_MODE=require
DATABASE_SSL_CERT=/etc/ssl/certs/client-cert.pem
DATABASE_SSL_KEY=/etc/ssl/private/client-key.pem
DATABASE_SSL_ROOT_CERT=/etc/ssl/certs/ca-cert.pem

# External Service Timeouts
DYDX_API_TIMEOUT=30s
DYDX_WEBSOCKET_TIMEOUT=60s
BLOCKCHAIN_RPC_TIMEOUT=30s

# Compliance and Auditing
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=info
COMPLIANCE_MODE=strict

# Feature Flags
FEATURE_ADVANCED_ORDERS=true
FEATURE_MARGIN_TRADING=false
FEATURE_STOP_LOSS=true

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System maintenance in progress. Please try again later."
